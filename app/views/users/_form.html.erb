<div class="new-user-form">
  <%= form_with(model: user, local: true, url: users_new_path) do |form| %>
    <% if user.errors.any? %>
      <div id="error_explanation" class="notification is-danger">
        <h2><%= pluralize(user.errors.count, "error") %> prohibited this user from being created:</h2>

        <ul>
        <% user.errors.full_messages.each do |message| %>
          <% unless message.include?("Password digest") %>
            <li><%= message %></li>
          <% end %>
        <% end %>
        </ul>
      </div>
    <% end %>

    <h2>Enter User Details</h2>

    <div class="field">
      <p class="control has-icons-left">
        <input class="input" type="text" placeholder="Name" name="user[name]">
        <span class="icon is-small is-left">
          <i class="fas fa-user"></i>
        </span>
      </p>
    </div>

    <div class="field">
      <p class="control has-icons-left">
        <input class="input" type="email" placeholder="Email" name="user[email]">
        <span class="icon is-small is-left">
          <i class="fas fa-envelope"></i>
        </span>
      </p>
    </div>

    <div class="field">
      <p class="control has-icons-left">
        <input class="input" type="password" placeholder="Password" name="user[password]">
        <span class="icon is-small is-left">
          <i class="fas fa-lock"></i>
        </span>
      </p>
    </div>

    <div class="field">
      <p class="control has-icons-left">
        <input class="input" type="password" placeholder="Confirm" name="user[password_confirmation]">
        <span class="icon is-small is-left">
          <i class="fas fa-lock"></i>
        </span>
      </p>
    </div>

    <div class="field">
      <div class="control">
        <%= submit_tag "Create User", name: "commit", value: "Create User", class: "button is-primary" %>
      </div>
    </div>
  <% end %>
</div>
